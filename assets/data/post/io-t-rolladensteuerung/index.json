{"hash":"f0071d1ee2a29baeb759f5f9322308f2436904a5","data":{"post":{"id":"4d042d3d75a6489313ae24c1d59d2577","title":"IoT Rolladensteuerung","teaser":"Ein seit langem schwellendes Problem im Büro wurde jetzt mal angegangen. Die “nervige” Rolladensteuerung im Büro. Warum an den Schalter stellen und eine ganze Minute lang den Knopf drücken?","image":{"type":"image","mimeType":"image/jpeg","src":"/assets/static/steuerung.feec1dd.327116d0324fb5c859f03c72ebb0740d.jpg","size":{"width":765,"height":523},"sizes":"(max-width: 765px) 100vw, 765px","srcset":["/assets/static/steuerung.feec1dd.327116d0324fb5c859f03c72ebb0740d.jpg 765w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 765 523' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-a2233609f8256dcdc65a4c2b8b150b9f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-a2233609f8256dcdc65a4c2b8b150b9f)' width='765' height='523' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAsAEADASIAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAABgcEBQABAwgC/8QAOxAAAQMDAQQFCQUJAAAAAAAAAQIDBAAFERIGITFBEyIyYZEHFBVCUXGhwdFVY3KBsSMkNUWCkpOiwv/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/xAAcEQACAwEBAQEAAAAAAAAAAAAAAQIRIRIxMkH/2gAMAwEAAhEDEQA/AM6D7%2bR/cPpWwyrlIdH5JPyroeFbTUxgdukma1JUhq5lkD1TGQvd791R0z7kB/FWj%2bKEPkqvjaFnp7glgrW2l51tClIOFaSsA4PLdmisWu2t4SmBHAG4ZBJ8Sao%2bYpYLrBtNyuP2hDV%2bKIofouu3n9z0kpk25SsbgWnE5PiavLfb4S46NURgklXq7%2b0aE/KEv0C249bchxxCFJaUdSUq1EHAPIjl3VkXFuqB9L9CK3ynJMdCy5F1EdYdbcedSih48DHP5q%2bled0Xi9NAKbmykJJyNK8CnfsPPVc9nYslx0OOqBDmDnSrPDfv9lTkmh4yvC7NbBqGp137v41gfcHEI8TTGFNtBhu4NrPqrQr/AGTRc91XVb92TQtfoblwQAgYynSSlWCPYRQftdtbfLZKMdE9grwAUBgaxu4k8PgKZrpKhU6ejYhpOhABxx/U0tfLLNWzOjJZcCHEaFAnkQCfmKHrHt5fjJS25NjlIBOqQ2MHHLdjjULamcu%2byZjk2Q0ZLKlEdH2VpGMae7AxWRjT0Z/NogqULhGW0w80JShnoEFRS5u36RyOOW8ezHCm/sVYWbNGfcZStHnAQdKznGE4J7snJxQnsJsxC82bnKBW/rIVrPZxxSnv5E91MUv4Tjq%2bNScr88KcqK305sQZsrIjR1uEDO4jhWnbTdEdqE6PD61b7JPL6dkZ7TZBq%2buLig2cHnVaI9AW3bbju/c3vAUsvK1bWYspMl1iai4OaUqJT%2bySkDhnkrgcZ4U9WH3M8apbnbId8vz9suzAkwXo7cxTSlEAOpUUBQwR6pwfcK2q0Ls8xBXVoz2E2WdvkJ%2bUxHfefS8GWdIylPVypRHPAI%2bFOlPk32QT/I2D73HD/wBVNsNsg2K/uxbPFbiR0xAsNt5xqU4cneeJ0p8KJPAh7YEbMQJ7cVVuRAeRNhAJkMBHWBPBeOYVxz31cejLt9nS/wDGaPE2eLfrogzOlbkstudDKjrLbzWDyUOXtByD7KCtl9tbzK25mWCW60/HjKKEvqbCXVYHFRThJP8ATU6Q3TP/2Q==' /%3e%3c/svg%3e"},"image_caption":"Rolladensteuerung im Büro","content":"<p>Da kann man doch auch nen Servomotor hinmachen und dann vom Rechner ansteuern! Gesagt getan, oder besser gesagt überlegt, gezeichnet und\ngekauft.</p>\n<p>Folgende Schritte waren notwendig:</p>\n<ol>\n<li>Hardware bestellen</li>\n<li>Software-Code schreiben</li>\n<li>In Homeautomation einbinden</li>\n</ol>\n<h2 id=\"hardware\"><a href=\"#hardware\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Hardware</h2>\n<p>TLTR: Am Ende des Abschnitts gibt es die Teileliste der Rolladensteuerung.</p>\n<p>Nach ein paar empirischen Erfahrungen hatte ich einen passenden Servo bestellt, welcher auch genug Kraft besitzt um die Schalter zu\nbetätigen. Für einen Schalter genügt hier ein Servo, da dieser wechselseitig entweder nach oben oder unten drückt. Die entsprechenden Winkel\nwerden später in der Software festgelegt.</p>\n<p>Um diesen anzusteuern habe ich mich für den <code>ESP8266</code> Chip mit NodeMCU entschieden. Dieser ist sehr kostengünstig zu erwerben (um die 2€)\nund enthält bereits einen integrierten WLAN Chip für die spätere MQTT Kommunikation. Zudem kann er mittels USB mit Strom versorgt werden und\nwird eines der vielen rumliegenden Micro-USB Netzteile als Stromquelle bekommen.</p>\n<p><figure class=\"md-figure-block\"><img class=\"g-image g-image--lazy g-image--loading md-figure-image\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 300 195' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-220c90f204d03fed07faa7ae9863d119'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-220c90f204d03fed07faa7ae9863d119)' width='300' height='195' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAqAEADASIAAhEBAxEB/8QAHAAAAgMAAwEAAAAAAAAAAAAABgcDBAUAAQII/8QANRAAAgEDAgUCAgcJAQAAAAAAAQIDAAQRBSEGEjFBYVFxBxMUFSIjMkLRFlJicoGCkaGxwf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/EABwRAQEBAAIDAQAAAAAAAAAAAAARARIhAiIxYf/aAAwDAQACEQMRAD8AavPtXRfzVVpgveq8t2q96y00OfzXYl80Gatxjp1gG57hXYflQ59f0NAOt/FO4ZzDpcf3hOF7536k%2bnb/AN9WVU8TcIjBWdQxGQCcE%2bwrkl7FDE0ksipGoyzMQAB5Jr5e0fXNRXVtSu59SEkqj6RyvLztzA7BGI89PSiDjq01DjDh%2bw13S7%2ba4tAVgnsNxh84JCDckZ3z2p4imw/xO4USaSJdXikkRgpWJWfmPjA3HkVH%2b3092T9SaDf3i9pJPulP/T/qgj4f/Cz6Pd299qe3y2DiJty3ggbAf5PtTsjthy4ACqOgA2o2YspW8W8YfU8OUjR2KMwMkgRdu2epPoBS8s9W4q4tRizRQW5YgspxHy9sDqds7nPQEYxW18RdOW9tninj50zzDwfUUMcN3sXDF7bK07tYzBY2EsmSBnqq/wBc7eazynTXGty74FWS153uZLq9VvmBWPLG/wDDjsD%2blCulacs%2boQ2dwL355LRW8jDKQkDIRR1JBI8beaP9Y4zsrBgkORN25l5pDuRsnbofxe1ALtf61dy3EHNBaysrO7SbM3rz4z%2bYbL1z33q9vLNnX6vXNx41Swt44oJ9Pf5cqM6GBsGSJwftK42%2byeoPbOPSiD4fnUm1vFnb3ZgdmeKeGIuQ2AcHOBynoSfXb1rS4V4GluArw2%2bFY5M1wmE/tj7%2b7Hv4pvcN6JHo9sY0d5JG3eRzux9ugHgVrl1GY29NVxaRGeNY5igLopyFbG4B771fU7VWjNTodqCXeuaQt1Gwx1pU6zwGq62LiRrgRSrhVhjLEyjoCewI9venpJ%2bE1RlH26Ph%2blPpfBGqXdyr3llZIzAFcnmWEb55v32OR6Aco96ZWhcI2lm6z3RN1cj88gGF/lXoK2bEDB2rQXtVu1SPcKKgAUAYqwDUC9amWpJkNTqdqgXtUi9KQ//Z' /%3e%3c/svg%3e\" width=\"300\" alt=\"ESP8266 NodeMCU\" data-srcset=\"/assets/static/nodemcu.6b65613.6f15a1492d9682303386a31cd6e59354.jpg 300w\" data-sizes=\"(max-width: 300px) 100vw, 300px\" data-src=\"/assets/static/nodemcu.6b65613.6f15a1492d9682303386a31cd6e59354.jpg\"><noscript><img class=\"g-image g-image--lazy g-image--loaded md-figure-image\" src=\"/assets/static/nodemcu.6b65613.6f15a1492d9682303386a31cd6e59354.jpg\" width=\"300\" alt=\"ESP8266 NodeMCU\"></noscript><figcaption class=\"md-figure-caption\">ESP8266 NodeMCU</figcaption></figure></p>\n<p>Nach einigen ersten Gehversuchen in Fusion 360 und ein paar Testdrucken am 3D Drucker ist der finale Entwurf für einen neuen Schalterrahmen\nentstanden. Als Muster stand mir hierfür ein Exemplar von Busch &#x26; Jaeger aus dem Schlaterprogramm Reflex Si. Dieser ersetzt den vorhandenen\nRahmen und besitzt zudem eine Halterung für den Servo und die Platine. (<a href=\"https://www.thingiverse.com/thing:3729624\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Model auf Thingiverse</a>)\nMit diesem eingesetzten Rahmen ist weiterhin auch eine manuelle Betätigung möglich.</p>\n<p><figure class=\"md-figure-block\"><img class=\"g-image g-image--lazy g-image--loading md-figure-image\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 768 388' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7ff0e305d64f2b30dd7d5c71327c4611'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7ff0e305d64f2b30dd7d5c71327c4611)' width='768' height='388' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAP5UlEQVRo3oVZd18byRLUx7k7%2b%2b4czuAzJmcwAiSUAxiTMwjltJIQIEBZYN/7sv2qe2ZXC37hj/lpV1rtblVXV/fMOK7a36nSfqJK5ztV8XnT7FG1%2bai%2bw7jq/KBy64nKOC63HvV4ohKu4yHnuL7U6KnBxxjGy2OMsj7mUdbPrTY7VLqpUTqXo2Q6Ralshq7u7ui29w8VG48//Y/vx8807y3vZnuv/jm/v8amj6%2bA8UowqeMqsDkYIIOvtB8FJF9YBbDrRpfKeGD2ukbZckU%2b5YG4xmDw/BKt5y/GL2vU%2bVwDr5vnPSrW%2bRr1gpUGg76lYrlM2XyW0tk0JTNpyhXylMF5IhUno2zQffdRXrRQ71rPMF4QrY57FillOykcyNaTJkEdK/BPighgdZTNC9r9P/GN%2bMfizQNtfN2g89gZFUsGpQ288G1drrMDF4CNrvVdES9c1C9tyP16dMWRvr2jPO6TyWUEeCYHsAB%2bdnlJp7EYXSQSlMb32WKe4qkkpTMpur6rUa33XZ5TrHfkXuo5z0kxtFLK%2bnmWIrRi%2bhhNZSs1OCo2tkwpyQ3wY%2b6uSeFwkEIhP3399pUWFuYour1D1e4/iGxHXkIBVaPwoIbRVPesNNog8Zby5dIL0Bk6OD2l8NdNml9y0sj4BE1Oz9Do5CStrK3R8fm5pEK2oIjIFXJUa7bouqvUwEQYmggm3kxHuzrKzX7aWZg0ESZOPnb0ZfPYv4mWUa7WoDXPGrlcK7S8skQDA%2b9BwC5Ve/8C0LYV6QJeqKj/x/I2kNPFipK3gM6rSB%2bengnopVU3Tc3O0ujYKH369De9efMn/fLrL/I5OTFO/oCPtvf3KJZMUA5qYDLiSIvSVZlqXU6/Jzy/Y6nA4CBglBq9vjJtaWni6fvGo%2bVpDlPykteWaXUlv3O1OoXCIVGAe22Vhob%2bpvWtbZjld8rfK9D8MMnp2h0VEOlsISuDQScR6cMzE7QLoOcAeozGRkdkjIOAoaFP9PbdW3r9%2b2t6%2b/YtTU5O0Nqai7zeNYqsR%2bng5FjIM9MilU4iLWCSrAY8u3Df0Uro2dSoSTHV0bCr4anvFaIAy1D6eWWqIAMPiETDFI2GRAWfPn2k6M4eHPpfdHXfJOOWQatI5zTwZFaBjmx%2bI6fLbYEeNUGPj9EEosyfw8Of6cOHv%2bj3P36nX3/9lV69fkXDn4fI7V4ln88jJPj9XtrY%2bkYnFxfwhxyqRZYuE3FRxm2rJXmchxoKVkp2VIo0%2bl5RanRtVQoDhm9ASUanq1LAsEnHNDGTgHDERgAUEIEpVmo1yeVcvg/6CHmrQK/9T9D8HQMfGRmmyalJmp6ZoZnZGZpfmKfZ%2bTmaxvHilwWLBJ9vDUS4KRgKSFpcIC0y8IQEDDKejFO5ekW1zqOYbe5epSVHv/ig0rNU14Ft4hyAGbTRZoUrT3CYTs2lq5/T6rscHD8CAiIwwpUVJ/0NBQRxzCUqidJ1fHFO0W9b5HTrSI//H9D4nJqeAsBFeMoyOZed5FxdpWWPl1a8PjHANa8a/Ds/k8H7mQiP%2b6e0YEWwGlJcLe7vLZMsMBFsygBdaEEdbaiirUhQ/tAvnw4GWtRuLkbGBoGcrtzXKV0oUDDopzDYdy5/EQJW19y0ubcH0Ij0nAI9MjoMkMM09l8izaAXFhdoGYCXV1fIBaDBjU3au0hQ4gpqqjUpe9ei9E2djhIZCm9skM/vw3VuPHeJ3K5l8gE8K8IDInxIi69bW5IWKa4qUOBF/JLyRgFp0aEy%2bocsqka%2bCSKaumo8dJ%2bp3Ex9h4A3Hfy%2bQVnDUA0JytYlJOaCFFcQjdVVJ338e5BGYFxjExM20KM0PgFjm3gBegqgEekV1ypA4P8a9M75JcUBOv%2bglJa7a1MWBGRQcbIou/xdGqm3c3JGgVCQPAC9AtKWnUu05nZZ3sBEsBq39/clLUQNqQQUcUnlmypM8kk6yfy9Wa16VpBZ7abfOUzZX9cbdIo83j44QGMSk9ITg7yCwYAY0ZelBRDwUXyAAZuDifg8PETDoyqnOdIsbZbwqstFq3jprzCx02QaIFuIyKMATSO90rcNDIDHp6igpo5ZDXm800WhIlWH1eBGOWY1cFqICpgIMy02OC1OKJFO472zdA41pJCi1/U6XaPhYbLZKFWwbU2aSQDnQuzynM4B/DyZgsT3Kbq5SaFoRFJgHZVgcXGe/oBbDw4OwOAQ6ZHPAn5qRkV6eYXlvSwp4o9uINJxuixe0TpM8%2bjkCGURvT76/Yt82QLNBGT4uNZUxzVFRBqfaZRgjl4WCjmMpygYiSg1QFFLzi9iysokPSibq%2bQBEevfNqWJYlO%2bTKWQFjEqlIp0i/yXvobV8NCxjJ5V4GDTYDfc2dkCWC%2bIuJDc8keiND0/L9GPREKI5jJU8IXCIGUJcuRc9gY4T10a9DrtnMbosnwjD%2bL7Mii%2b3gcjiyJKbly7BNNLXj8AYFMroK7BPydFqaFOmbsG5ZDX8dtb2jo8Il/ALybpZMKhCKUGbtaWaXZmGinrEgXE9cSKvYHToqpbajFHW5l0cOvKLeEJouQSs3GDDDB5eky%2bUIgCABmCCbISIiiHx6cncvO9wwPyBAK0xaBLfdBK3iqayeq9uLYYGTdS6PoW0PqmbhRo8/PZsY5%2b6h4kPdTVqD1YaXGWM1BuN0UNnF6sPFbDCjrVcSiTyyf3CmyOnMpcLdgk%2bX3ZL/LXt2L0qntlBUAS7Ii7%2b7sUggKi62HJrWDAS5ubGwI8ihTgbtDv9%2bDcR%2buIJvuDOHCxTClENMMuroGbuc2RZgI8HnR2iBJXhy9OJ2WqdxLt1A3GNa7FZxqRZtDJuwdKAXSKzzkltDpMtXAuZ0Dyfiyh0gL%2b4PF5Za7CIE9jF/LJ/sOtNnvSkttD4/NL9H54nLyhMFUemmKQkgKmMyYrkBgYioQDyHm0vzA/t3vFIiASCWJiFBAiPJByEMo4ODpAe5qgGOdbvkQp%2b8vWmIB7CoMAk7wxRGjRuUwpKCOH31LVGiVq95Qwgde0CrQaMjavyOpSyUYqRglyzmCsR1CqCdoLMrjkDgx8EHUE0cPMobmanFugRTdSeXNLzPksnpT5BGN3sCkUTGMAI2fZAm1sfqUIXjqK3I8I%2bJAQIENmhwFpTjj/ogB4FjuHA6foPJWGB1wL%2bIyNAFaNzyLAiXy%2boySiHL/CtdVbyXVRw01dpULN9Ia6RJvVlUJpTKF8Jo0KJWCmnOf7CACXSgbNk6oBtNVv376hV7/9hoo0gWev07fdXdra2ZE5zSLUMIGyfZnJkSEEdNAImd3fA%2bdwGz88CsP7ZxcAG5ImSBQQfU4CT5NZHV5pUNZoGybKXdkFxmk6Ky8sJigEeIUAnvwsoidI3gLMrQKbwchVH6CIB8sPmAAGztckoMyEUQbovNx773CfAlAnR5Z7jkFE%2b/37dwL8HSZVA6hSn0dGUK4/0Szaai7JE5Pjkg5cvaYmxyiezenuVyvAnEAwCfmHlppz44LLUpW%2bbm8jHfwCPGqSEO6TwGoIwC84z4NQzT6keASj/IZSegCJRjbWQaJfytUoGiRJgeu6eIREXAPPYuSZEJxzdxgvliiRz8uUmO8ZwHPmTdAA%2bddf7%2bkdZo88gxz8OIg5xCyqEkx5bxckHcpzJ6cnBTQTMI7IswLnoYJkuSpGqBSgZ1AFIUKViDwTIf10T9z9CHU4gnIWgpQVCSGLgLClBp%2bauCAtwvidpTmHCc4qHHppaVHSxSLgxlb6IO%2bkBs2Gyr1CLAHQR4cCem5hTnqOwcEPAtqMtAI9Qz6oYQfN2xFmoLv4DMEYlxD1KQbP3erYMM3iPXzhiBgnE93vA3QjZOgOqaD9oGCq4b6liIFjsnHtHB2LoUU4LQAyzClikaAMMoC%2bgft2Tg2WnxtmxK00lyqeJDEBpqMnKjdK3hxpEzTuxTNDBj0goJW8eQwODqLxmkak/QC9L6A52tyw8bN4LYGn0yP478zcrDj%2b3kVcWuty6zvm/z9ezHy7ajZoGmFRLzflxQ8UEawEIULU0RW339hCl4gqwMAjkZBFgAzdM3ADxbLnPoI9hFNkBPLlqO2dntFx7BJdG0dtT6kF8uaW%2bgPntAb9BoNz2gK9r0GDKPYWJ4hVoD%2bpe2NqLaDRhaZQamVprvNDLdfpLrBoW8ZTs0EtBQFv%2bUFXq0ANrr05eEOujskK2soM5g2HsbhIndPCrBJ2EqRSoCyZixo8reWZ4gRemDvIJTRH3EYPfByg169fAeyfsiTGn0zCJJydazyvATDo/eMjzBLXbaCHLELXgiHaPYsp0HrJndPXSmXu/Ord5ytGfQV0rUmCHNvUUMC0ONdoUw7TylwLN2uABKhBJhYwyYT0DgfSE7DRWSRoAkI2NfBskmeLI3DosckpejcwKLNKt9dLQ8PD9Meff%2bB8HJMeD22hdB2dnQpoNjOeY0xNmaCHEOlpcgeCaL0vKAnvKDZ7Vl2XoHFXaim6awVVTYO7ZNiW2R3m6qqhp4uycoLeO98CUIAuNLUn6JvyYGM0W19pTzMFimLSEwx4hACzVzAHf8cTFp4mDyCPX70boA8jEzT7xSnz%2bk2MNRDBDs4yZ3kz6MkpJW8eXOvdfgU6jfmGLHO11QKIpKlUMHsq96xVIbPHMSd%2bJdtGjoNXR2SlpMXLRXr1pNlf8i7U/0NaiD%2b0rQfLFJd7h/MLBRplUZXIoCYgKH3AhKwbTAiQbzu70nCtYnLEQNm5OS24ZH0e/kSfAZrTwO3z0/bJGcWhNtlc0fI2UD0MVBH1Pl0NvPNTxI1nEe8926UqwyMcvEbGa2XFlop%2bSa%2bo9hcP9A1tkrIexosa9x1r0YGbi3jpmjYBjqsB9w9mlVCtsOrNuTLMIP9lUQW1mRdVRkaGBDjXbpfPR1vHp5JiapWqL29lykp9vDdRRkqWbEv05nTXWttsdJ9tnpRe7BM4eHFQGJF1sscXOy7dZ0z2Ge6rQb1YV0uwLSTw%2bWkqK1IO%2bD0WATwZ%2bgvtKretspjCawoYDHrVy6ARabTSRTGyHxLxvCa4L%2b9Ov2/Rq1nlOi/htalkM3TDthJsrgOau0b2PUVH%2bcVmo7XHZ5HwKC9iWDcz1aEeXrDSRJXJvH5Jjhr3%2bDtHJ7pldkkf8O7dG1lV4grAi6Cbh5heI6dN0EKgBq12mjov5K2DUu89X8vk/QmkZUW2zx51q6v3DfVOUdnaMuvvGzr6W2K2LbJnG4/9HV7D2u/r2SpHfy%2bwv%2bSkUkb994kuMYFhNXBnuOL108b%2bISUAmsmVOq33/VSt7lqbHGbaWaRbhtb7qaEx9IJuBcdX%2bF9Fnz/bRX62T/hdEcAH5vY3/2BJRDNkbjuZOyrWRuiLvTj7hoR5zlGUnSNel8MxK0K2qbv/WPdS1aWt79n/zsrjF%2bClzvN76QbOvtvDzzTPbzgt9I6XGdirttrqF7XIdvkP%2bjdewL2182%2bOrAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"768\" alt=\"3D Model des Rahmens\" data-srcset=\"/assets/static/3D-Model.e780801.a091c0bc78546fb23fa345ec5beb4f03.png 768w\" data-sizes=\"(max-width: 768px) 100vw, 768px\" data-src=\"/assets/static/3D-Model.e780801.a091c0bc78546fb23fa345ec5beb4f03.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded md-figure-image\" src=\"/assets/static/3D-Model.e780801.a091c0bc78546fb23fa345ec5beb4f03.png\" width=\"768\" alt=\"3D Model des Rahmens\"></noscript><figcaption class=\"md-figure-caption\">3D Model des Rahmens</figcaption></figure></p>\n<p>Beim Zusammenbau der Komponenten ist lediglich auf die richtige Verbindung des Servo mit den Pins zu achten. Die braune und rote Leitung des\nServos sind immer der Ground und der +5V Anschluss. Der gelbe Draht erwartet somit das Steuersignal, welches in der Standardkonfiguration\nauf dem Pin D1 ausgegeben wird. Ich habe aus dem Stecker vorsichtig mit einem Schraubenzieher den Steuerdraht herausgezogen und kann diesen\nnun flexibel verbinden. Wo sich die Pins genau befinden steht auf der Platine und ihr seht im linken Bild die verbundene Rückseite.</p>\n<p>Für die Befestigung am Rahmen habe ich die beim Servo mitgelieferten Schrauben verwendet (Den Servo selbst auch nur 2x angeschraubt.)</p>\n<h3 id=\"einkaufsliste\"><a href=\"#einkaufsliste\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Einkaufsliste</h3>\n<ul>\n<li>1x MG996R Servo (<a href=\"https://de.aliexpress.com/item/32636102294.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AliExpress</a>\noder <a href=\"https://www.amazon.de/dp/B06XPDH47M/ref=cm_sw_r_other_apa_i_IqnhDbVMWPC9Q\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Amazon</a>)</li>\n<li>1x NodeMCU v3 ESP8266 (<a href=\"https://de.aliexpress.com/item/32647690484.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AliExpress</a>\noder <a href=\"https://www.amazon.de/dp/B06Y1ZPNMS/ref=cm_sw_r_other_apa_i_UonhDbVNQ77E2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Amazon</a>)</li>\n<li>ggf. ein USB-Micro Netzteil</li>\n</ul>\n<h2 id=\"software\"><a href=\"#software\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Software</h2>\n<p>Da ich immer noch bei der Embeddedentwicklung auf eher ungewohnten Pfade wandele benutze ich aktuell auch immer noch die Arduino Plattform\nzum compilieren. Für das eigentliche Schreiben verwende ich allerdings Sublime, da ich hier meine gewohnte Umgebung mit\nSyntax-highlighting (farbliche Hervorhebung von Befehlen und Paramatern, …) habe.</p>\n<p><figure class=\"md-figure-block\"><img class=\"g-image g-image--lazy g-image--loading md-figure-image\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 768 415' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c2563e6029a276ad49edcfc68cd0dfb6'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c2563e6029a276ad49edcfc68cd0dfb6)' width='768' height='415' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAjCAYAAAAkCQwqAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAL5ElEQVRo3sVaaW9cZxUeEB/4AN1SQGpKlja1Z9/uvbN4ZrzFbmInVFB%2bAx%2boKEL9wDdUKEIqIkVAUQtqG1qBlzRpnNW7x/bMeGY8Xsdjjx3HSZqmAbVNQ0WoELTNwznn3jtekzi2C5aenPeuvu/znvOcc17Hcu2993Djg2v4x/sf4OPr13Hj2of45/W/418ffYQbZP9944bgk48/Bv7zCbbm56b8e2G2gCsXCjL%2b9NNPcPPmTePyzWX3lSyd/%2byzz7CVP5ZXBxL4Q3cvDg8m8Up8AC%2bePovfnzqNl8604w261pLOoDmVRvNQWmxTamjDkPcY7ziRL%2bDw8RNoajqCliPH8JemVrS0HkUrjU00txxFM51rbnkTTc2MI/izcR9f42daj7yF4ydO4622U3cNfs7ifumPcLz4MjwvvwIX2S8%2b82NYnvohLD/4kW4/D3z/aXz5%2bUO45%2bCT2Ln9UWx/xAGrW4M3EINLqYCb4PJXYFe5B9t3Wgnlt8RDOwzsXGJvhx2Lzz68ywbLZXL/mat/E1y9dh0/Gx6DreUYgsdOQjt6YsuhEoJH2lDT3g3v08/AVuaBW4vBG6qCmwhYRCU8wUo4vCHY3YFlcHiCJcuwuVTYnKpu14JxzUqW73fSO60OBS41CsvswhUMjc8iN3Uew/l5pCfmCOeQISwfL9psnu9dIJzfEIbGz%2bHc5ffw0%2bd%2bISvi9IXpw0Jw%2bSrkA1107PTqkPP%2biNxjl8lqsNHkF20AZXb/HVFuV7DH6oWq1UCrqEaZzQsnEW/Jn7uE%2bHABSSJhcLRImEFirIjkmD5Ojc9haHIeQzTxoclzYtNEVIYmslGkiICZC1fxk2d/Li6ur2IA5bQqt52IzYfHboH1EPAYEeBTqhCI1JIH%2bOFgDyjMX5aJZ3j1J/WJZacWViGzEpsl4OJflxFgdWqy0uIF5KK88lZxXU2u6Vg8LnmB4Ql8bT0e4FcqURGto/drcAerYClSCPTnpjE4Mo0ErXhybBYpcn1eecHEIvgaewB7C9tMfmHLCOCPdCtRgUmC04h/c6JWsfqx3R0sXeMxX7s9AX7sIU/x0O/yqhEhw8UhULzwrhAwIAQUhQQOAXZ39ogS8ivs5PymPKBoEPDN3XY46aPY/d2KHutmvJsxX7bUxY2xuL2M1xsC%2bjMu8iw3vX8PZRgnh8D0%2bXckBFK0qrzCaWPi8rG3dPWtCoHnsINSIK80E7AI1dAD37oE7m5E0EthFqIQMH%2bXZWbhXVptivvCBWQKFxdjfhMTvBOSY3OYf%2bd9PP/LFyQXCwH0gQLHUtEzsEUksAfYyQMCFXW6Z9E5y0RxFr3ZEaRy48ikh5GgcNjsCt8JCfK0hXev4dCvf4eHdpWTMFUhqjUgqjRACUcQqI1CraRw8GuSv00XLt%2bMBxCxe6w%2b%2bPxhqIGohI94wOhUHh3JQSSp5M3Fe5Htj2MgOUxCd%2b5z84SkQcCvXvgttu%2byijJH1P2Iqo3wBcMI7NVJ0KojVAwFF2Pf5ttECOgi6CZv00Ix0hldXyyTs/NUB4xjMDuJRHoUmZE8MuNFyf1pI/9/3gR4/LTivhpS6Aj8wWooBC6COCTKGOK6uihulISlBIRjteRdBgG5/CjaE3G0dQ6gqa0LxzsSlBFmkJu%2bKB86QEUSj01tGJ66gOGCjs1owFICVLUG9aEnEdH2I7b3IGr3fRux2gPwUTmsxy6lSG%2bAoMkkNkoAa4CTUmcgXAO709CAXH4M7YN9aOvox5unetDa1omuxKiu1kRA79CEniZzeprsy%2bTRPTSO3vTkhgui5R5QrhMQ/q7oAE88SqiqfwLBSB08lBofpdhVfBpCGq0aiZjdE5DczzUBN01uKaDCd64ExQPCiFbtK9UelvGZGfRmhtE1OIJOQnt/Fmf60lQYFSUE%2bjNTiGenxBOSREBvegKdRFB3anyLCKAQ8FEIeGvg9VBTpEUJMXgoR3M4aLRa7AFOtwKPl6s%2bmrhZGTpUqRj1XiK4Lg%2bwk6j6A5FS6rWMFqbQlUrRxDM42Z2SlR4tvl0SwAH62HZa9TPkCV1MAjdDmw6BlSJYhUrtAIJKHUKxeoQr94n7P1LmktwtkyAVtxEBSrQCSqxCrFOhEtilrLsYYvD7OBuY91MIjFMIxHGyK0Eh0EtaMEghMKI3PeQBZ1Nj6CQC%2bmn146QNifHZTVWB2RUEcI%2buKNWoC30H0UADIjUNqCQd4FBQQjUSAvyxNrcKjSbtr6BK0R%2bQybPl83dsolbUAkvvt2QncjjT34W32vvQfLwDbxw5iRYSw4Q0SOdxlsKii0KgjzwjtQUZIbuGBiikAUxALNiIKBFQVfct1DU8KTZQsVdWzUkTjUbCcJMO2CUU1MVi6a6KIe%2byY70QyuTQnaRsMDCMs/GsxDh7AIdBgmwHeQAjQc3RrbrFu6kZlhLw8G6bXgipDRQCe6lXr5UwqKjaT21rnWiB%2bdE2nwq1KiIh4A5Q%2b%2bxc0hOsszVeRcDU3GX0pPOi7pz%2b%2binOB0T1C%2bijlecswNfiWf2eHjrmDMC2Kzkm40FpoorrDo1lBBilMLezSxsg%2b9JND94JMnZ/TPXXd4T0ttl8zjzmd7Gbr9UiryJgZGoWp%2bNpEsFhnKHVP9mTwqneNGWCjBDC3eGAtMszBjHTxvG0ThbBJG0jBLAIcgrjFpjTmZvTGsU9r7zZHvN5mSDvE5goqX/IaJ3DQqS%2bi6S3yvY1MsMqAvJz59GZzOB0bxKneoYIKZzoSkoo8MTW6vt1l9czgWQEGm80BJgAL1WCnAECoXposcdF/DSKfdWwPEl2bdYCsTLW8aip6GuGgO/OBBTmL1JOz9BkR0UHOgdz6OjPiQcwOAQ4/0shRF4Qp7qAN0qyU1tTCpshYHcEEAk/QaJ3UCathKqhhmsNWyOk%2bKlGYDH0%2bQICLyGkBWR7a8MiyIVQnCbPk2Q355Xl0tcsd1n40ryZWdBX2bRblwX0Qkjz1cLnicJKqs6Fjr71pZY2PsVK8aPAZsKpwOFUNpcFRqcL6E4PSSF07GxcKkGzFOaYlgKIxZA8oI8I6iFxHGQP2GDLnL1FNxilblDxVSPIhRCFAWuBvleoiltbaaL%2bqF4DlNOYCyDdqnJtwwQUp4vSBXK5y/Fu7gWaZS53hZz/uQJMGdjKQojTIGtAQDyASmESP3Z7Fj52e97T5%2b0rJsETClH6CwpcKvUBVAxxu8xkLMb%2b7dvmVQRkiwtoI%2bE7eroXJ7qT6KDC5yzVA0fJG1pP9hAxhVITxOmOGyMGb6X3G6my38gAHCqrMLl6PDg6i/krS0RQiUEN6vEeiOyV1TdrdSbCo%2bj9QbldlabG3CXmrTPuB6xGyCzi1rvEqz1g/hKSlOOHCIPc4dEkhzj90cQSJHgj9MGj5A0bxRhpxkoMkxddvvohDh36DbbvJgJ8MWmGePLcBwSj9TLmVBipbqDqsFFKZE5t5YYuWF3aim3z5USsm4CRuVnER0fRR%2bjIjaFvgrq//LSgn8DHvRtAzzgRWihi7O0rGLv0zjLkFi5h7oMP8ezzh7Bjt72U93mVefW5xZVixmhjreZmKR1bDauP19omu8sQ2HH4Dex47XXBTrav/mkFXl8Hlt67/Jmdr62BVw5jZ1Mr9nzvKTjK3BTLUcSqDyBS2UACSLVAzUEqhxsQUyoQIzIiFA4hWnU/IUTCWEHHfC5MYx9vcNDY5Q2tqyNcRYBl2zZYtj2ILxBM%2b7%2bA5YFt%2bNquPfrfAd0hRJVGhPz1%2bqZIFW%2bK0DFlAx/lfq4HQhQWLIq8SeJSSAy1MALRvdQ2x3R3X2c7vJoAiwX/L3z9wW%2bQoldRaotADdRRoVMLVSNLgqhG66CwDtB1b7AKAfIMlY59RIJLi1BKrKSmqFr%2bwuugMnq9LfFKL7FY6CVfqq7F/fsa8dX6fbhvX4Pg3sf3l/CVusfxwP5G3MvnjesCOnc/4T66hy3few/hvn36vQ80HJDxPcZ108rvamjEQxWVcJJwOXy0ompE/m%2bASzE1QDGgllaYt7bNJkf%2beEITcHgC5A1REka9SHJJ/RCQZ50%2b7g2Ccp51Rt5LYxZT1hw7PfNfdDPsiZV8cx8AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"768\" alt=\"Arduino Code\" data-srcset=\"/assets/static/arduino-code.e780801.8129041844cd2539d0b77a0be782c0e8.png 768w\" data-sizes=\"(max-width: 768px) 100vw, 768px\" data-src=\"/assets/static/arduino-code.e780801.8129041844cd2539d0b77a0be782c0e8.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded md-figure-image\" src=\"/assets/static/arduino-code.e780801.8129041844cd2539d0b77a0be782c0e8.png\" width=\"768\" alt=\"Arduino Code\"></noscript><figcaption class=\"md-figure-caption\">Arduino Code</figcaption></figure></p>\n<p>Am Anfang der Datei ist der Konfigurationsabschnitt um einige Einstellungen wie die WLAN oder MQTT Einstellungen festzulegen. Auch lässt\nsich hier der Pin für den Servomotor und die jeweiligen Auslenkungen justieren. Der Code sowie eine genauere Beschreibung lässt sich auf\nGithub unter <a href=\"https://github.com/Poeschl/Window-shutter-control\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Poeschl/Window-shutter-control</a> finden.</p>\n<p>Einbindung der Rolladensteuerung in die Homeautomation\nIch verwende für die Automatisierung privat als auch im Büro den <a href=\"https://www.home-assistant.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Home Assistant</a> und davon das auf den\nRaspberry Pi ausgelegte Linux Distribution Hass.io. Diese erlaubt auf dem Raspi sehr schnell eine voll funktionsfähige und erweiterbare\nPlattform aufzuziehen. Um zwischen dem System auf dem Raspberry und dem NodeMCU eine Verbindung herzustellen, müssen sich beide Geräte in\neinem gemeinsamen Netzwerk befinden.\nNach diesem Schritt muss ein MQTT Broker zur Verfügung stehen. Dieser ist als zentraler Server zu verstehen, welcher zwischen IoT-Geräten\nund dem Home Assistant vermittelt. Hass.io bietet dafür ein Addon “Mosquitto broker” an, welches sich mit einem Klick installieren lässt.</p>\n<p>Um den “Shutter-Controller” einzubinden ist noch ein kleiner Eintrag in der Konfiguration von Home Assistant nötig. Damit wird die richtige\nTopic für den Home Assistant festgelegt, auf welchen die Steuerbefehle hinterlegt werden müssen. In die Konfiguration schreibt man folgende\nZeilen:</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">cover</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span> mqtt\n    <span class=\"token key atrule\">command_topic</span><span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">-</span>shutter<span class=\"token punctuation\">-</span>control/1234/command\n    <span class=\"token key atrule\">optimistic</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">device_class</span><span class=\"token punctuation\">:</span> shutter\n    <span class=\"token key atrule\">retain</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre>\n<p>Nach einem Reboot steht die Rolladensteuerung auf der Oberfläche zur Verfügung und sollte ihren Dienst tun.</p>\n","path":"/post/io-t-rolladensteuerung/","date":"27.10.2020","canonical_url":"https://nerdweibweb.de/smarthome/iot-rolladensteuerung.html","tags":[{"id":"Smarthome","title":"Smarthome","path":"/tag/Smarthome/"},{"id":"HomeAssistant","title":"HomeAssistant","path":"/tag/HomeAssistant/"},{"id":"SmartOffice","title":"SmartOffice","path":"/tag/SmartOffice/"},{"id":"Automation","title":"Automation","path":"/tag/Automation/"}]}},"context":{}}